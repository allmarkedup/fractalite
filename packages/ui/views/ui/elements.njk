{% macro preview(handle, opts) %}
<div class="fr-preview{% if opts.resize %} fr-preview--resizable{% endif %}">
  <div class="fr-preview__wrapper">
    <iframe class="fr-preview__window" src="{{ route('preview', _.handleToParams(handle)) }}"></iframe>
  </div>
</div>
{% endmacro %}

{% macro tree(nodes, opts = {}, level = 1) %}
<ul class="fr-tree" data-level="{{ level }}">
  {% for node in nodes %}
  <li class="fr-tree__item {% if node.children %}fr-tree__branch{% else %}{% if node.type === 'page' %}fr-tree__item--page{% else %}fr-tree__item--component{% endif %} fr-tree__leaf{% endif %}">
    {% if node.children %}
    <span class="fr-tree__label">{{ node.label }}</span>
    {{ tree(node.children, opts, level + 1) }}
    {% else %}
    <a class="fr-tree__link" href="{{ node.url }}">{{ node.label }}</a>
    {% endif %}
  </li>
  {% endfor %}
</ul>
{% endmacro %}
